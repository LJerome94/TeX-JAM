%-------------------------------------------------------------------------------
\usepackage{amsmath} % Math formating
\usepackage{amsthm} % Proof and theorem formating.

% Prevents font related errors.
\newcommand\hmmax{0}
\newcommand\bmmax{0}

\usepackage[french]{babel} % French labeling. TODO English support
\usepackage{graphicx} % More options for figures.
\usepackage{float} % Better handling of figures and table.
\usepackage{xcolor} % More colors.
%\usepackage[x11names,svgnames]{xcolor} % Commented out because of clash with pgfplots.
\usepackage{url} % Url formating.
\usepackage{enumerate} % More options for lists.
\usepackage{enumitem} % Lists customization.
\usepackage{setspace} % Line spacing.
\usepackage{geometry} % More flexible display options
\usepackage{wrapfig} % Figure formating.
%
\let\saveboldmath\boldmath % Fix mathcal clashes
\usepackage[bitstream-charter]{mathdesign} % Change the default font.
\let\boldmath\saveboldmath % Fix mathcal clashes
\usepackage{bm} % Any character in bold.
%
\let\circledS\undefined % Fixe random clash
\usepackage[T1]{fontenc} % Choose font encoding
% Fix mathcal clashes
\DeclareSymbolFont{cmsymbols}{OMS}{cmsy}{m}{n}
\SetSymbolFont{cmsymbols}{bold}{OMS}{cmsy}{b}{n}
\DeclareSymbolFontAlphabet{\mathcal}{cmsymbols}
%
\usepackage[utf8]{inputenc} % Allows more character directly in-code.
\usepackage{layout} % 
\usepackage{makeidx} % Allows to makes indexes.
\usepackage{subfiles} % Allows to render other .tex files in 'MAIN'.
\usepackage{fancyhdr} % Formats header and footer of page.
\usepackage[color=chaptercolorback, size=tiny]{todonotes} % Allows to-do notes.
%-------------------------------------------------------------------------------


%%%%%%%%%%%%%
% Formating %
%%%%%%%%%%%%%

% Lists -----------------------
\AtBeginDocument{\def\labelitemi{-}}


% Links -----------------------
\usepackage{hyperref} 
\hypersetup{ 
     %backref=true,
     %pagebackref=true,
     %hyperindex=true,
     %bookmarks=true,
     colorlinks=true,
     breaklinks=true,
     urlcolor= blue,  
     linkcolor= chaptercolor,
     bookmarksopen=true,
     citecolor=chaptercolor
}


% General formating -----------------------
\usepackage{caption}
\usepackage{subcaption}

\tolerance=500

\renewcommand{\normalsize}{\fontsize{10pt}{11pt}\selectfont} 
\setlength{\textwidth}{6.5in} 
\setlength{\textheight}{9in}
\setlength{\paperwidth}{8.5in} 
\setlength{\paperheight}{11in}
\setlength{\itemindent}{1cm}

\oddsidemargin = 0.0 in
\evensidemargin = 0.0 in
\topmargin = .0 in
\headheight = 0.0 in
\headsep = 0.0 in
%\parskip = 0.1in
\parskip=1em
\parindent = 0cm

%numberwithin{equation}{section} % Equation numbering.

\captionsetup{justification=centering}

\newcommand{\blankpage}{\newpage\pagenumbering{gobble}~\clearpage\pagenumbering{arabic}} % Command to add blankpage.


% Tableaux -----------------------
\usepackage{array} % Table manipulation.
\usepackage{multirow} % Allows to fuse rows-wise.
\usepackage{multicol} % Allows to fuse cells column-wise.
\usepackage{booktabs} % More table personalisation.

\def\frenchtablename{Tableau} % French table name.

\newcolumntype{C}{>{$\displaystyle}c<{$}} % Math-mode columns types.
\newcolumntype{L}{>{$\displaystyle}l<{$}} %
\newcolumntype{R}{>{$\displaystyle}r<{$}} %
\renewcommand{\arraystretch}{1.5}
\usepackage{dcolumn} % Decimal point alignment.


% Format de titres -----------------------
\usepackage[calcwidth]{titlesec} % Titles customization.

% Default color - Edit these in 'MAIN'.
\colorlet{chaptercolor}{black!75!black}
\colorlet{chaptercolorback}{black!10!white}

\renewcommand*{\thesection}{\fcolorbox{chaptercolor}{chaptercolorback}{\color{black}\arabic{section}}\color{black}} % Section number format.
\renewcommand*{\thesubsection}{\Alph{subsection}} % Subsection number format.
\renewcommand*{\thesubsubsection}{\roman{subsubsection}} % Subsubection number format.

\titleformat{\section}{\penalty-2000\vspace{0pt plus 10pt}\huge\bfseries}{\thesection\hspace{-11pt}}{1em}{}[\vspace{2pt}{\color{chaptercolor}\titlerule[2pt]}] % Section format.

\titleformat{\subsection}{\penalty-2000\vspace{0pt plus 10pt}\large\bfseries}{\fbox{\thesubsection}\hspace{5pt}}{1em}{}[] % Subsection format.

\titleformat{\subsubsection}{\penalty-2000\vspace{0pt plus 10pt}\bfseries}{\thesubsubsection.}{1em}{}[] % Subsubsection format.


% Figures -----------------------
\newcommand{\Figure}[4]{ % Allow to quickly add figures.
\begin{figure}[H]
    \centering
    \includegraphics[width=#2\linewidth]{#1}
    \caption{#3}
    \label{#4}
\end{figure}
} % #1 path-to-file, #2 size, #3 caption, #4 label


% Color text -----------------------
\newcommand{\red}[1]{\color{red} #1 \color{black}}
\newcommand{\purple}[1]{\color{purple} #1 \color{black}}
\newcommand{\blue}[1]{\color{blue} #1 \color{black}}
\newcommand{\orange}[1]{\color{orange} #1 \color{black}}
\newcommand{\green}[1]{\color{Green} #1 \color{black}}
\newcommand{\yellow}[1]{\color{yellow} #1 \color{black}}
\newcommand{\teal}[1]{\color{teal} #1 \color{black}}
\newcommand{\cyan}[1]{\color{cyan} #1 \color{black}}
\newcommand{\lime}[1]{\color{lime} #1 \color{black}}
\newcommand{\pink}[1]{\color{pink} #1 \color{black}}
\newcommand{\lightgray}[1]{\color{lightgray} #1 \color{black}}
\newcommand{\gray}[1]{\color{gray} #1 \color{black}}
\newcommand{\darkgray}[1]{\color{darkgray} #1 \color{black}}
\newcommand{\olive}[1]{\color{olive} #1 \color{black}}
\newcommand{\brown}[1]{\color{brown} #1 \color{black}}
\newcommand{\magenta}[1]{\color{magenta} #1 \color{black}}
\newcommand{\violet}[1]{\color{violet} #1 \color{black}}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Université de Sherbrooke (2022)
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Notes dans la marge -----------------------
\newcommand{\jdo}[1]{\todo[size=tiny, color=blue!20!white]{#1}} % Jérôme's todos.
\newcommand{\tdo}[1]{\todo[size=tiny, color=green!20!white]{#1}} %Théo's todos.

% -----------------------
\newcommand{\US}{Université de Sherbrooke}
\newcommand{\DP}{Département de physique}


% Students names -----------------------
\newcommand{\JL}{Jérôme Leblanc}
\newcommand{\TD}{Théo Dionne}


% Professor's names -----------------------
\newcommand{\JQ}{Jeffrey Quilliam}
\newcommand{\YG}{Yves Grosdidier}
\newcommand{\DM}{Denis Morris}
\newcommand{\IG}{Ion Garate}
\newcommand{\RC}{René Côté}
\newcommand{\MP}{Michel Piorio-Ladrière}
\newcommand{\CB}{Claude Bourbonnais}
\newcommand{\AT}{André-Marie Tremblay}
\newcommand{\EP}{Edouard Pinsolle}


% Title page -----------------------
\newcommand{\university}[1]{\renewcommand{\university}{#1}} % University
\newcommand{\faculty}[1]{\renewcommand{\faculty}{#1}} % Faculty
\newcommand{\departement}[1]{\renewcommand{\departement}{#1}} % Departement
%\makeatletter
\def\maketitlepage{
	\begin{titlepage}
	\begin{singlespace}
	\begin{center}
		\@author
		\vfill
		\textsc{\color{chaptercolor}\Large \@title}
		\vfill
		Travail présenté à\\
		\@teacher\\
		pour le cours\\
		\textit{\@class}
		\vfill
		\university\\
		\faculty\\
		\departement\\
		\@date
	\end{center}
	\end{singlespace}
	\end{titlepage}
}
\def\teacher#1{\def\@teacher{#1}}
\def\class#1{\def\@class{#1}}
%\makeatother

% Boîte équations ----------------------
\usepackage{tcolorbox}
\tcbuselibrary{theorems}

\tcbset{highlight math style={colframe=chaptercolor,colback=white,arc=4pt,boxrule=1pt,sharp corners}
}

% Use a colored box for 'boxed'
\renewcommand{\boxed}[1]{\tcbhighmath{#1}}

% Big box around paragraph
\newtcolorbox[auto counter,number within=section]{definitionbox}[1][]{colback=white,colframe=chaptercolor,fonttitle=\bfseries,sharp corners,#1}
\newcommand{\bigbox}[2]{
    \begin{definitionbox}
#1
\end{definitionbox}
}